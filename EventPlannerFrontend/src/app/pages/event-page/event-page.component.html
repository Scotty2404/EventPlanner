<body>
  <div class="breadcrumb">
      <p>
          <a [routerLink]="['/start']" class="breadcrumb-link">Home </a> /Event ansicht
      </p>
  </div>
  
  <div class="title">
          <button mat-icon-button [routerLink]="['/start']" class="btn-back">
                  <mat-icon>arrow_back</mat-icon>
          </button>
          <h1>Dein Event</h1>
  </div>
        
    
    
  <div class="content-container">


    @if(isLoaded){

      <div class="content">

        <div class="event-box">
        
            <app-event-detail-box>
            </app-event-detail-box>

        </div>

        <div>
          <div class="event-details-container">

            <mat-card>
              <h2>Alle Infos zu deinem Event:</h2>
            
              <div class="event-info">
                <h3>{{ event.title }}</h3>
                <p>{{ eventTime }} in {{ event.city }}</p>
            
                <h4>Details:</h4>
                <p>{{ event.description }}</p>
            
                <h4>G√§steanzahl:</h4>
                <p>{{ event.max_guests }}</p>
              </div>
            </mat-card>
          </div>   

          <div class="qr-code-section">
                    
            <h3>Dein QR-Code:</h3>
            <div class="qr-code-container">
              <img 
                [src]="'http://localhost:5000/public' + event.qr_image" 
                alt="QR Code" 
                class="qr-code-image"
              >
              <a 
                [href]="'http://localhost:5000/public' + event.qr_image" 
                download="Event_QR_Code.png"
                class="download-button"
              >
                <button mat-raised-button color="primary">
                  <mat-icon>download</mat-icon> Download QR
                </button>
              </a>
            </div>
        </div>     
      </div>       

      <div class="kurzinfo-mail">
        <h3>Oder gleich eine fertige Einladung:</h3>

          <div class="kurzinfo-container">
            <img src="/finalLogo.png" alt="EventAccess Logo" style="max-width: 200px; margin: 20px auto; display: block;" />
            <h1>Einladung {{ event.title }}</h1>
            <p>
              {{ event.description }}
              {{ eventTime }}. √úber den QR-Code etwas weiter unten in der Einladung gelangt ihr zu meiner Partnerwebsite EventAcces. Dort k√∂nnt ihr euch ganz einfach an- oder abmelden und viele weitere Feautures entdecken, schaut gern einmal vorbei.
            </p>
            <table align="center"><tbody><tr><td><img src="https://gen.sendtric.com/countdown/fbzaw8b6az" style="display: block; max-width: 300px; width: 100%; margin: 0 auto;" /></td></tr></tbody></table>
            
            <!-- Beispielbild -->
            <img class="example" [src]="'http://localhost:5000/public' + event.image" alt="Bild zum Event">
                
                
            <!-- Location -->
            <p>Die Location k√∂nnt ihr auch hier schon einmal bei Google-Maps:</p>
            <ng-container *ngIf="event.google_maps_link">
              <a [href]="event.google_maps_link">Route auf der Karte ansehen</a>
              <iframe 
                [src]="googleMapsUrl" 
                width="100%" 
                height="400" 
                style="border:0; border-radius: 10px;" 
                allowfullscreen="" 
                loading="lazy" 
                referrerpolicy="no-referrer-when-downgrade">
              </iframe>
            </ng-container>
                
            <!-- QR-Code -->
            <div class="kurzinfo-qr-code">
              <h2>Zur An-/Abmeldung bei EventAcces:</h2>
              <a [href]="'http://localhost:4200/' + event.url">
                <img 
                  [src]="'http://localhost:5000/public' + event.qr_image" 
                  alt="QR Code" 
                  class="qr-code-image"
                  style="width: 50%;"
                >
              </a>
            </div>
                
            <!-- Anleitung -->
            <div class="instructions">
              <strong>So funktioniert‚Äôs:</strong><br>
              üì± √ñffne die Kamera-App auf deinem Smartphone<br>
              üîç Richte die Kamera auf den QR-Code oben<br>
              üåê Klicke auf den angezeigten Link<br>
              ‚úÖ Sag zu oder ab ‚Äì ganz einfach!
            </div>
            <div class="kurzinfo-qr-code">
              <h4>Dein zuverl√§ssiger Partner f√ºr Event Planungen</h4>
              <img src="/finalLogo.png" alt="EventAccess Logo" style="max-width: 200px; margin: 20px auto; display: block;" />
            </div>
          </div>
        </div>
      </div>
        
    }

    @else {

      @if(isFailed) {
          
          <div class="loading-container">
              <app-loading-failed-box></app-loading-failed-box>
          </div>
      }

      @else { 
          <div class="loading-container">
              <app-loading-box></app-loading-box>
          </div>
      }

    }

  </div>
</body>